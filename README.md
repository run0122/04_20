# 04_20

## 1. 데이터 통신(UART, I2C, SPI)

오늘은 UART, I2C, SPI 총 3가지 방식을 통해 두개의 아두이노 보드(Uno, Nano)끼리 데이터를 전송하는 방식을 배웠습니다.

예제 코드는 잘 작동하였고, 이를 기반으로 UART를 사용해서 나만의 데이터 통신 프로그램을 만드는 도중에 문제가 생겼습니다. 제가 원하는 동작 방식은 Uno에서 Serial.read()를 통해서 Pin번호를 직접적으로 입력 받으면 그걸 Nano로 전송하고 Nano에서 Serial.read() 기능으로 Pin 번호를 받아서 LED나 buzzer를 작동하도록 하고자 했습니다.

Serial.read() 함수를 사용하는 데에 문제가 있었습니다. Uno에서 Serial.write()를 하고, Nano에서 Serial.read()를 하는 데에는 오류가 발생하지 않았으나, 양쪽에서 Serial.read()를 사용할 경우 충돌이 발생하는 문제가 있었습니다. 

찾아본 결과 이는 2개의 보드에서 데이터를 동시에 주고 받기 때문에 발생하는 문제였습니다. 그로 인해서 제가 작성한 코드는 어떨 때는 작동하고 어떨 때는 작동하지 않았습니다.

이를 개선하기 위해선 2가지 방법이 있다고 합니다. 첫번째로는 각 보드에서 데이터를 보내는 방법과 받는 방법을 분리하는 방식이 있다고 합니다. 또한 I2C, SPI와 같은 통신 방법으로 이를 수정할 수 있다고 합니다.
